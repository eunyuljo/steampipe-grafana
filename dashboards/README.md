# 🛡️ AWS 보안 모니터링 대시보드 모음

이 폴더에는 Steampipe + Grafana를 활용한 AWS 보안 모니터링 대시보드들이 포함되어 있습니다.

## 📊 대시보드 목록

### 1. **기본 모니터링**
- `grafana-dashboard-simple.json` - EC2 기본 모니터링 (간단한 버전)

### 2. **기본 보안 모니터링 시리즈**

#### 🕐 시간별 보안 이벤트 추이
- **파일**: `grafana-security-timeline-dashboard.json`
- **기능**:
  - 일별/시간별 인스턴스 생성 패턴
  - 24시간 내 위험 지표 알람
  - 보안그룹 사용 패턴 변화
  - 보안 이벤트 타임라인

#### 🔐 IAM 보안 모니터링
- **파일**: `grafana-iam-security-dashboard.json`
- **기능**:
  - 90일 이상 미사용 계정 탐지
  - 사용자 활동 패턴 분석
  - IAM 사용자 위험도 평가

#### 🪣 S3 보안 모니터링
- **파일**: `grafana-s3-security-dashboard.json`
- **기능**:
  - 퍼블릭 액세스 허용 버킷 경고
  - 버전 관리 비활성화 버킷 탐지
  - S3 버킷 보안 위험도 평가

#### 🌐 네트워크 보안 모니터링
- **파일**: `grafana-network-security-dashboard.json`
- **기능**:
  - SSH/RDP 전체 오픈 보안그룹 경고
  - 0.0.0.0/0 오픈 포트 분석
  - VPC별 인스턴스 분포
  - 위험한 보안그룹 상세 분석

### 3. **🛡️ 보안 실무자용 전문 대시보드 시리즈**

#### 🔐 암호화 및 키 관리 컴플라이언스
- **파일**: `grafana-encryption-compliance-dashboard.json`
- **대상**: 보안 실무자, 컴플라이언스 담당자
- **기능**:
  - KMS 키 상태 및 생명주기 관리
  - 삭제 예정 암호화 키 경고
  - 액세스 키 연령 및 위험도 평가 (90일/365일 기준)
  - 사용자별 액세스 키 수 분석
  - 암호화 키 사용 패턴 모니터링

#### ⚠️ 위험 평가 및 컴플라이언스
- **파일**: `grafana-risk-assessment-dashboard.json`
- **대상**: 보안 매니저, 위험 관리 담당자
- **기능**:
  - EC2/S3 보안 컴플라이언스 점수 (게이지 형태)
  - 위험 요소별 실시간 알람 패널
  - 일별 보안 위험 요소 추이 분석
  - 인스턴스 위험도 상세 평가 매트릭스
  - 종합 위험도 스코어링 시스템

#### 🚨 보안 인시던트 대응 센터
- **파일**: `grafana-security-incident-dashboard.json`
- **대상**: SOC 분석가, 인시던트 대응팀
- **기능**:
  - 1시간 내 긴급 이벤트 모니터링
  - 24시간 내 새 액세스 키 생성 추적
  - 업무시간 외 비정상 활동 탐지
  - 시간대별 보안 이벤트 패턴 분석
  - 실시간 보안 인시던트 상세 로그

#### 📈 보안 운영 KPI
- **파일**: `grafana-security-kpi-dashboard.json`
- **대상**: 보안 운영팀, 경영진 보고용
- **기능**:
  - 네트워크 격리/데이터 보호/인증 보안 지수
  - 보안 KPI 30일 추이 분석
  - 일별 위험도 분포 스택 차트
  - 보안 영역별 종합 점수표
  - 경영진 대시보드 (요약 지표)

## 🚀 사용 방법

### 1. 개별 대시보드 임포트
```bash
# Grafana 접속
http://localhost:3000

# 대시보드 임포트
1. + (Create) → Import 클릭
2. JSON 파일 업로드 또는 내용 복사
3. 데이터소스를 "Steampipe"로 선택
4. Import 클릭
```

### 2. 자동 일괄 임포트 (권장)
```bash
# 상위 디렉토리에서 자동 프로비저닝 스크립트 실행
cd ..
./grafana-auto-provision.sh
```

## 🔧 문제 해결

### "No Data" 문제 발생 시:
1. **데이터소스 확인**: Settings → Data Sources에서 Steampipe 연결 상태 확인
2. **패널별 수정**: 각 패널 Edit → Data source를 "Steampipe"로 변경
3. **가이드 참조**: 상위 디렉토리의 `fix-no-data.md` 파일 참조

### 빠른 수정 방법:
```bash
# 데이터소스 UID 확인 후 JSON 파일 수정
sed -i 's/"uid": "steampipe"/"uid": "실제_UID"/g' *.json
```

## 🎯 보안 모니터링 포인트

### 🔴 Critical 알람
- SSH/RDP 포트가 전체에 열린 보안그룹
- 퍼블릭 액세스가 허용된 S3 버킷
- 90일 이상 미사용 IAM 계정

### 🟡 Medium 위험
- 버전 관리가 비활성화된 S3 버킷
- 과도한 인바운드 규칙을 가진 보안그룹
- 비정상 시간대 인스턴스 생성

### 🟢 정상 모니터링
- 전체 리소스 현황
- 시간대별 활동 패턴
- VPC별 분산 상태

## 📈 대시보드 확장

새로운 보안 대시보드를 추가하려면:
1. Steampipe AWS 플러그인의 테이블 확인: `steampipe query ".tables aws_*"`
2. 보안 관련 쿼리 개발
3. Grafana에서 패널 생성 후 JSON Export
4. 이 폴더에 추가

---

💡 **팁**: 모든 대시보드는 동일한 Steampipe 데이터소스를 사용하므로, 한 번 설정하면 모든 대시보드에서 활용 가능합니다!