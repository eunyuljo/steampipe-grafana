{
  "annotations": {
    "list": []
  },
  "editable": true,
  "gnetId": null,
  "graphTooltip": 0,
  "id": null,
  "links": [],
  "panels": [
    {
      "datasource": "Steampipe",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "vis": false
            }
          }
        }
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 0
      },
      "id": 1,
      "options": {
        "pieType": "pie",
        "reduceOptions": {
          "calcs": ["lastNotNull"]
        }
      },
      "targets": [
        {
          "format": "table",
          "rawQuery": true,
          "rawSql": "WITH ec2_stats AS (\n  SELECT instance_state, COUNT(*) as count\n  FROM aws_ec2_instance \n  GROUP BY instance_state\n)\nSELECT \n  instance_state || ',' || count::text as csv_format\nFROM ec2_stats\nUNION ALL\nSELECT 'running,3'\nUNION ALL  \nSELECT 'stopped,1'",
          "refId": "A"
        }
      ],
      "title": "CSV 방식 Pie Chart",
      "transformations": [
        {
          "id": "extractFields",
          "options": {
            "format": "auto",
            "source": "csv_format"
          }
        }
      ],
      "type": "piechart"
    }
  ],
  "schemaVersion": 26,
  "time": {
    "from": "now-1h",
    "to": "now"
  },
  "title": "Pie Chart CSV 방식",
  "uid": "pie-csv-test",
  "version": 1
}