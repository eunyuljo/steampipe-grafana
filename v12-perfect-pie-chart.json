{
  "datasource": {
    "type": "postgres",
    "uid": "steampipe"
  },
  "fieldConfig": {
    "defaults": {
      "color": {
        "mode": "palette-classic"
      },
      "unit": "short"
    },
    "overrides": []
  },
  "gridPos": {
    "h": 8,
    "w": 12,
    "x": 0,
    "y": 8
  },
  "id": 3,
  "options": {
    "reduceOptions": {
      "values": false,
      "calcs": [
        "lastNotNull"
      ],
      "fields": "",
      "limit": 40
    },
    "pieType": "pie",
    "tooltip": {
      "mode": "single",
      "sort": "none"
    },
    "legend": {
      "displayMode": "visible",
      "placement": "bottom",
      "showLegend": true,
      "values": []
    }
  },
  "pluginVersion": "12.3.3",
  "targets": [
    {
      "datasource": {
        "type": "postgres",
        "uid": "steampipe"
      },
      "editorMode": "code",
      "format": "table",
      "rawQuery": true,
      "rawSql": "SELECT \n  CASE instance_state\n    WHEN 'running' THEN 'Running'\n    WHEN 'stopped' THEN 'Stopped' \n    WHEN 'pending' THEN 'Pending'\n    WHEN 'stopping' THEN 'Stopping'\n    ELSE instance_state\n  END as __text,\n  COUNT(*)::float as __value\nFROM aws_ec2_instance \nGROUP BY instance_state\nORDER BY COUNT(*) DESC",
      "refId": "A"
    }
  ],
  "title": "Instance State Distribution",
  "type": "piechart"
}